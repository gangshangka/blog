<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>文章标题 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Qt项目转换VS2022工程问题的小问题在将 Qt 项目转换为 Visual Studio 工程时，可能会遇到 CMake 相关的报错问题，今天就来分享下对应的解决办法。 一、问题原因由于在同一个构建目录中使用了不同的 CMake 生成器（比如从 “Visual Studio 16 2019” 切换到 “Visual Studio 17 2022”），导致 CMake 无法识别新的生成器，进而出现">
<meta property="og:type" content="article">
<meta property="og:title" content="文章标题">
<meta property="og:url" content="http://example.com/2025/02/15/Qt_in_VS/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Qt项目转换VS2022工程问题的小问题在将 Qt 项目转换为 Visual Studio 工程时，可能会遇到 CMake 相关的报错问题，今天就来分享下对应的解决办法。 一、问题原因由于在同一个构建目录中使用了不同的 CMake 生成器（比如从 “Visual Studio 16 2019” 切换到 “Visual Studio 17 2022”），导致 CMake 无法识别新的生成器，进而出现">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-02-15T02:00:00.000Z">
<meta property="article:modified_time" content="2025-03-21T04:40:20.879Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Qt_in_VS" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/15/Qt_in_VS/" class="article-date">
  <time class="dt-published" datetime="2025-02-15T02:00:00.000Z" itemprop="datePublished">2025-02-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      文章标题
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Qt项目转换VS2022工程问题的小问题"><a href="#Qt项目转换VS2022工程问题的小问题" class="headerlink" title="Qt项目转换VS2022工程问题的小问题"></a>Qt项目转换VS2022工程问题的小问题</h1><p>在将 Qt 项目转换为 Visual Studio 工程时，可能会遇到 CMake 相关的报错问题，今天就来分享下对应的解决办法。</p>
<h2 id="一、问题原因"><a href="#一、问题原因" class="headerlink" title="一、问题原因"></a>一、问题原因</h2><p>由于在同一个构建目录中使用了不同的 CMake 生成器（比如从 “Visual Studio 16 2019” 切换到 “Visual Studio 17 2022”），导致 CMake 无法识别新的生成器，进而出现报错。</p>
<h2 id="二、解决方法"><a href="#二、解决方法" class="headerlink" title="二、解决方法"></a>二、解决方法</h2><h3 id="（一）方法一：删除并重新创建构建目录"><a href="#（一）方法一：删除并重新创建构建目录" class="headerlink" title="（一）方法一：删除并重新创建构建目录"></a>（一）方法一：删除并重新创建构建目录</h3><ol>
<li><strong>返回到项目根目录</strong><br>打开“Developer Command Prompt for VS 2022”，执行命令：</li>
</ol>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /d D:\QTproject\new_pro\samp6_2EventAndSignal</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>删除现有的 <code>build_vs</code> 目录</strong><br>在项目根目录下运行：</li>
</ol>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rmdir</span> /s /q build_vs</span><br></pre></td></tr></table></figure>
<p>注意此命令会永久删除该目录及其所有内容，确认无重要文件需保留。<br>3. <strong>重新创建新的构建目录</strong><br>可以使用不同目录名如 <code>build_vs2022</code>：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> build_vs2022</span><br><span class="line"><span class="built_in">cd</span> build_vs2022</span><br></pre></td></tr></table></figure>
<ol start="4">
<li><strong>运行 CMake 命令，指定正确的生成器</strong></li>
</ol>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -G &quot;Visual Studio <span class="number">17</span> <span class="number">2022</span>&quot; -A x64 -DQt6_DIR=D:\Qt\<span class="number">6</span>.<span class="number">5</span>.<span class="number">3</span>\msvc2019_64\lib\cmake\Qt6..</span><br></pre></td></tr></table></figure>
<p>各参数含义如下：</p>
<ul>
<li><code>-G &quot;Visual Studio 17 2022&quot;</code>：指定生成器为 Visual Studio 2022。</li>
<li><code>-A x64</code>：指定生成平台为 64 位。</li>
<li><code>-DQt6_DIR=...</code>：指定 Qt 的 CMake 配置路径。</li>
<li><code>..</code>：表示 <code>CMakeLists.txt</code> 位于上一级目录。</li>
</ul>
<ol start="5">
<li><strong>编译解决方案（可选）</strong><ul>
<li><strong>使用 <code>msbuild</code> 编译</strong>：</li>
</ul>
</li>
</ol>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msbuild samp6_2EventAndSignal.sln /p:Configuration=Release /m:<span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>参数说明：</p>
<ul>
<li><code>/p:Configuration=Release</code>：指定编译配置为 Release，如需 Debug 版本则改为 <code>/p:Configuration=Debug</code>。</li>
<li><code>/m:4</code>：用 4 个并行线程编译加快速度。<ul>
<li><strong>在 Visual Studio 中打开并编译</strong>：<ol>
<li>打开文件资源管理器，导航到 <code>D:\QTproject\new_pro\samp6_2EventAndSignal\build_vs2022</code> 目录。</li>
<li>双击 <code>samp6_2EventAndSignal.sln</code> 文件，用 Visual Studio 2022 打开。</li>
<li>在 Visual Studio 中进行开发、调试和编译操作。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="（二）方法二：在现有构建目录中删除-CMake-缓存"><a href="#（二）方法二：在现有构建目录中删除-CMake-缓存" class="headerlink" title="（二）方法二：在现有构建目录中删除 CMake 缓存"></a>（二）方法二：在现有构建目录中删除 CMake 缓存</h3><ol>
<li><strong>导航到 <code>build_vs</code> 目录</strong></li>
</ol>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /d D:\QTproject\new_pro\samp6_2EventAndSignal\build_vs</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><strong>删除 CMake 缓存文件和生成目录</strong></li>
</ol>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">del</span> /f /q CMakeCache.txt</span><br><span class="line"><span class="built_in">rmdir</span> /s /q CMakeFiles</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><strong>重新运行 CMake 命令，指定正确的生成器</strong></li>
</ol>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmake -G &quot;Visual Studio <span class="number">17</span> <span class="number">2022</span>&quot; -A x64 -DQt6_DIR=D:\Qt\<span class="number">6</span>.<span class="number">5</span>.<span class="number">3</span>\msvc2019_64\lib\cmake\Qt6..</span><br></pre></td></tr></table></figure>

<h2 id="三、其他注意事项"><a href="#三、其他注意事项" class="headerlink" title="三、其他注意事项"></a>三、其他注意事项</h2><ol>
<li><strong>确保使用正确的命令提示符</strong><br>要使用“Developer Command Prompt for VS 2022”，可在开始菜单搜索后右键选择“以管理员身份运行”。</li>
<li><strong>确认 Visual Studio 2022 安装了必要的组件</strong><br>打开 Visual Studio Installer，找到 Visual Studio 2022 点击“修改”，在“工作负载”选项卡确保选中“使用 C++ 的桌面开发”，在“单个组件”选项卡确认安装如“MSVC v143 - VS 2022 C++ x64&#x2F;x86 build tools”等相关组件，缺少则勾选安装。</li>
<li><strong>确认 CMake 版本</strong><br>建议使用 3.21 及以上版本，可用命令 <code>cmake --version</code> 查看，版本过旧需下载安装最新版并添加 <code>bin</code> 目录到系统 <code>Path</code> 环境变量。</li>
<li><strong>确认 Qt6_DIR 路径正确</strong><br>确认 <code>D:\Qt\6.5.3\msvc2019_64\lib\cmake\Qt6</code> 目录存在且包含 <code>Qt6Config.cmake</code> 文件。</li>
</ol>
<h2 id="四、备用方案"><a href="#四、备用方案" class="headerlink" title="四、备用方案"></a>四、备用方案</h2><p>若命令行方法不行，可尝试使用 Visual Studio 的图形界面来打开并配置 CMake 项目：</p>
<ol>
<li>打开 Visual Studio 2022。</li>
<li>选择“打开本地文件夹”，导航到 <code>D:\QTproject\new_pro\samp6_2EventAndSignal</code>。</li>
<li>Visual Studio 会自动检测 <code>CMakeLists.txt</code> 并加载项目。</li>
<li>在 Visual Studio 中配置并生成项目。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/15/Qt_in_VS/" data-id="cm8ialwph0000pxpta612b8zy" data-title="文章标题" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2025/03/15/Singleton/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          懒汉模式与饿汉模式
        
      </div>
    </a>
  
  
    <a href="/2024/11/15/error_in_VS/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">VS上qt配置的若干问题</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">March 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">February 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/03/17/aa/">文章标题</a>
          </li>
        
          <li>
            <a href="/2025/03/17/epoll/">文章标题</a>
          </li>
        
          <li>
            <a href="/2025/03/17/task1/">FreeRTOS中的任务实现</a>
          </li>
        
          <li>
            <a href="/2025/03/15/Singleton/">懒汉模式与饿汉模式</a>
          </li>
        
          <li>
            <a href="/2025/02/15/Qt_in_VS/">文章标题</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>